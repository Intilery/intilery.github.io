"use strict";(self.webpackChunkintilery=self.webpackChunkintilery||[]).push([[4438],{1015:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"customers/computed-traits","title":"Computed Traits","description":"Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the totalnumorders a customer has completed, the lifetimerevenue of a customer, the mostfrequent_category to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the page and track calls.","source":"@site/docs/customers/computed-traits.md","sourceDirName":"customers","slug":"/customers/computed-traits","permalink":"/docs/customers/computed-traits","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"computed-traits","title":"Computed Traits","sidebar_label":"Computed Traits"},"sidebar":"customers","previous":{"title":"Customers","permalink":"/docs/customers/overview"},"next":{"title":"SQL Traits","permalink":"/docs/customers/sql-traits"}}');var i=s(4848),r=s(8453);const o={id:"computed-traits",title:"Computed Traits",sidebar_label:"Computed Traits"},a=void 0,l={},c=[{value:"Processing",id:"processing",level:2},{value:"Types of Computed Traits",id:"types-of-computed-traits",level:2},{value:"Event Counter",id:"event-counter",level:3},{value:"Aggregation",id:"aggregation",level:3},{value:"Most Frequent",id:"most-frequent",level:3},{value:"First",id:"first",level:3},{value:"Last",id:"last",level:3},{value:"Unique List",id:"unique-list",level:3},{value:"Unique List Count",id:"unique-list-count",level:3},{value:"Conditions",id:"conditions",level:2},{value:"Accessing your Computed Traits using the Profiles API",id:"accessing-your-computed-traits-using-the-profiles-api",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the ",(0,i.jsx)(t.code,{children:"total_num_orders"})," a customer has completed, the ",(0,i.jsx)(t.code,{children:"lifetime_revenue"})," of a customer, the ",(0,i.jsx)(t.code,{children:"most_frequent_category"})," to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the ",(0,i.jsx)(t.a,{href:"/docs/schema/page",children:"page"})," and ",(0,i.jsx)(t.a,{href:"/docs/schema/track",children:"track"})," calls."]}),"\n",(0,i.jsx)(t.h2,{id:"processing",children:"Processing"}),"\n",(0,i.jsx)(t.p,{children:"Computed traits are updated every 30 minutes. Therefore if you are using the value of a computed trait in a journey, in a split for example, add a wait step of 30 minutes proceeding the use of the computed trait to ensure the value is up to date"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.em,{children:(0,i.jsx)(t.strong,{children:"Note:"})})," It is not currently possible to trigger a journey from the change of a value of a computed trait"]}),"\n",(0,i.jsx)(t.h2,{id:"types-of-computed-traits",children:"Types of Computed Traits"}),"\n",(0,i.jsx)(t.p,{children:"Customers currently supports the following types of computed traits:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Types of Computed Traits","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#event-counter",children:"Event Counter"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#aggregation",children:"Aggregation"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#most-frequent",children:"Most Frequent"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#first",children:"First"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#last",children:"Last"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#unique-list",children:"Unique List"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#unique-list-count",children:"Unique List Count"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#conditions",children:"Conditions"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#accessing-your-computed-traits-using-the-profiles-api",children:"Accessing your Computed Traits using the Profiles API"})}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Computed Traits",src:s(8171).A+"",width:"1870",height:"1770"})}),"\n",(0,i.jsx)(t.h3,{id:"event-counter",children:"Event Counter"}),"\n",(0,i.jsxs)(t.p,{children:["An Event Counter trait stores a count of an ",(0,i.jsx)(t.strong,{children:"event"})," over a period of time. For example, you can create a trait called ",(0,i.jsx)(t.code,{children:"number_logins_90_days"})," based on a ",(0,i.jsx)(t.code,{children:"User Logged In"})," event. You can also use event properties to only specific types of events."]}),"\n",(0,i.jsx)(t.p,{children:"Customer-level examples:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Orders Completed Last 30 Days"}),"\n",(0,i.jsx)(t.li,{children:"Pricing Page Views Last 30 Days"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Event Counter",src:s(7537).A+"",width:"1858",height:"1212"})}),"\n",(0,i.jsx)(t.h3,{id:"aggregation",children:"Aggregation"}),"\n",(0,i.jsxs)(t.p,{children:["An aggregation computes a ",(0,i.jsx)(t.strong,{children:"sum, average, minimum, or maximum"})," of a numeric ",(0,i.jsx)(t.strong,{children:"event property"}),". A good example is a ",(0,i.jsx)(t.code,{children:"sum_games_revenue_90_days"})," if you\u2019re sending an ",(0,i.jsx)(t.code,{children:"Order Completed"})," event with a ",(0,i.jsx)(t.code,{children:"revenue"})," property. In the example we\u2019re refining the revenue even further based on another event property: ",(0,i.jsx)(t.code,{children:"category = 'games'"}),". Note that you can only compute an aggregation trait for event properties that have a numeric value."]}),"\n",(0,i.jsx)(t.p,{children:"Customer-level examples:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Order Revenue Last 14 Days"}),"\n",(0,i.jsx)(t.li,{children:"Max Ride Distance Last 60 Days"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Aggregation",src:s(7940).A+"",width:"1834",height:"1964"})}),"\n",(0,i.jsx)(t.h3,{id:"most-frequent",children:"Most Frequent"}),"\n",(0,i.jsxs)(t.p,{children:["A most frequent customer-level computed trait will return the ",(0,i.jsx)(t.strong,{children:"most common value"})," for an ",(0,i.jsx)(t.strong,{children:"event property"}),". This is helpful to create traits like ",(0,i.jsx)(t.code,{children:"preferred_product_viewed"})," or ",(0,i.jsx)(t.code,{children:"most_commonly_viewed_category"})," that tell you what a customer's preferred product, or content category might be. Note that the most frequent computed trait requires the event property to have been tracked at least twice. In the case of a tie, we return the first alphabetical value."]}),"\n",(0,i.jsx)(t.p,{children:"Customer-level examples:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Favorite Blog Post"}),"\n",(0,i.jsx)(t.li,{children:"Top Purchase Category"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Most Frequent",src:s(2202).A+"",width:"1856",height:"1726"})}),"\n",(0,i.jsx)(t.h3,{id:"first",children:"First"}),"\n",(0,i.jsxs)(t.p,{children:["The first customer-level trait returns the first event property value we have seen. This is common for creating traits like ",(0,i.jsx)(t.code,{children:"first_page_visited"})," based on the page name."]}),"\n",(0,i.jsx)(t.p,{children:"Customer-level examples:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"First seen timestamp"}),"\n",(0,i.jsx)(t.li,{children:"First utm parameter"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"First",src:s(6728).A+"",width:"1860",height:"832"})}),"\n",(0,i.jsx)(t.h3,{id:"last",children:"Last"}),"\n",(0,i.jsxs)(t.p,{children:["The last trait returns the last event property value we have seen. This is common for creating traits like ",(0,i.jsx)(t.code,{children:"last_utm_campaign"})," to help you calculate last-touch attribution for paid advertising."]}),"\n",(0,i.jsx)(t.p,{children:"Customer-level examples:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Last seen at"}),"\n",(0,i.jsx)(t.li,{children:"Last utm parameter"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Last",src:s(6440).A+"",width:"1858",height:"1454"})}),"\n",(0,i.jsx)(t.h3,{id:"unique-list",children:"Unique List"}),"\n",(0,i.jsxs)(t.p,{children:["Unique list computed traits will output a ",(0,i.jsx)(t.strong,{children:"list of unique values"})," for an ",(0,i.jsx)(t.strong,{children:"event property"}),". This is helpful to understand the different types of products or content that a customer has interacted with or purchased. You can create a triat like ",(0,i.jsx)(t.code,{children:"unique_product_categories_viewed"})," and send marketing communications based on the categories viewed."]}),"\n",(0,i.jsx)(t.p,{children:"Example use cases:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Unique products purchased"}),"\n",(0,i.jsx)(t.li,{children:"Unique categories"}),"\n",(0,i.jsx)(t.li,{children:"Unique games played"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Unique List",src:s(4572).A+"",width:"1866",height:"1228"})}),"\n",(0,i.jsx)(t.h3,{id:"unique-list-count",children:"Unique List Count"}),"\n",(0,i.jsxs)(t.p,{children:["Unique list count computed traits will output a ",(0,i.jsx)(t.strong,{children:"count of the unique list of values"})," for an ",(0,i.jsx)(t.strong,{children:"event property"}),". You can create a traits like ",(0,i.jsx)(t.code,{children:"unique_product_categories_viewed_count"})," to understand the variety of products that a customer is viewing."]}),"\n",(0,i.jsx)(t.p,{children:"Customer-level examples:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Unique products viewed count"}),"\n",(0,i.jsx)(t.li,{children:"Unique categories count"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Unique List Count",src:s(1246).A+"",width:"1862",height:"1230"})}),"\n",(0,i.jsx)(t.h2,{id:"conditions",children:"Conditions"}),"\n",(0,i.jsx)(t.p,{children:"All computed trait types support a common \u201cAdd Conditions\u201d section. Conditions defined here restrict the messages considered when calculating the final value of the computed trait by looking at a property of the events. For example, you could limits events to only those where \u201cprice\u201d is greater than 30.00 or where \u201cpage.url\u201d contains \u201cpricing\u201d."}),"\n",(0,i.jsx)(t.p,{children:"The following operators are available."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"equals"}),"\n",(0,i.jsx)(t.li,{children:"not equals -"}),"\n",(0,i.jsx)(t.li,{children:"less than"}),"\n",(0,i.jsx)(t.li,{children:"greater than"}),"\n",(0,i.jsx)(t.li,{children:"less than or equal"}),"\n",(0,i.jsx)(t.li,{children:"greater than or equal"}),"\n",(0,i.jsx)(t.li,{children:"contains"}),"\n",(0,i.jsx)(t.li,{children:"does not contain"}),"\n",(0,i.jsx)(t.li,{children:"starts with"}),"\n",(0,i.jsx)(t.li,{children:"ends with"}),"\n",(0,i.jsx)(t.li,{children:"exists"}),"\n",(0,i.jsx)(t.li,{children:"not exists"}),"\n",(0,i.jsx)(t.li,{children:"before date"}),"\n",(0,i.jsx)(t.li,{children:"after date"}),"\n",(0,i.jsx)(t.li,{children:"within last (x days)"}),"\n",(0,i.jsx)(t.li,{children:"with next (x days)"}),"\n",(0,i.jsx)(t.li,{children:"before last (x days)"}),"\n",(0,i.jsx)(t.li,{children:"after next (x days)"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"accessing-your-computed-traits-using-the-profiles-api",children:"Accessing your Computed Traits using the Profiles API"}),"\n",(0,i.jsxs)(t.p,{children:["You can access your computed traits using the Profile API by querying the ",(0,i.jsx)(t.code,{children:"/traits"})," endpoint. All types of traits are returned for the customer"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"https://tracking.intilery.com/track/intilery/marketing/MARKETING/v1/profiles/email:xxx.xxx@intilery.com/traits\n"})}),"\n",(0,i.jsx)(t.p,{children:"returns:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'{\n    "lastName": "Bloggs",\n    "website": "www.intilery.com",\n    "externalId": "joe.bloggs@intilery.com",\n    "organisation": "Intilery",\n    "industry": "Other",\n    "firstName": "Joe",\n    "phone": "+44111222333444",\n    "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n    "computed": {\n      "number_logins_90_days": 9,\n      "sum_games_revenue_90_days":99.99\n    },\n    "email": "joe.bloggs@intilery.com"\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["You can read the ",(0,i.jsx)(t.a,{href:"/docs/apis/profiles",children:"full Profile API docs"})," to learn more."]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1246:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/unique-list-count-3b5d173ef8f67c37101f7ac1f39507c8.png"},2202:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/most-frequent-3d31d2482fcd47b8707f4b74dab92318.png"},4572:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/unique-list-276621b786a691bbf9a693af3ad35279.png"},6440:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/last-8f6f76504f8123baf188ccc7ced8ef7a.png"},6728:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/first-c2b12f0eb2738b1c5dc6c1d98d5164a8.png"},7537:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/event-counter-9589063c928eef40475855f56cc10505.png"},7940:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/aggregation-c4badff2468c42e63185fa9b55bd1857.png"},8171:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/computed-traits-9f6b26cab227d3eec009a2bec4febb13.png"},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>a});var n=s(6540);const i={},r=n.createContext(i);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);