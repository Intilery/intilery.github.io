<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Intilery Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Intilery Documentation Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-9T47KP3LPV","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Intilery Documentation" href="/opensearch.xml"><title data-react-helmet="true">Computed Traits | Intilery Documentation</title><meta data-react-helmet="true" property="og:url" content="https://intilery.com/docs/customers/computed-traits"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Computed Traits | Intilery Documentation"><meta data-react-helmet="true" name="description" content="Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the totalnumorders a customer has completed, the lifetimerevenue of a customer, the mostfrequent_category to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the page and track calls."><meta data-react-helmet="true" property="og:description" content="Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the totalnumorders a customer has completed, the lifetimerevenue of a customer, the mostfrequent_category to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the page and track calls."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://intilery.com/docs/customers/computed-traits"><link data-react-helmet="true" rel="alternate" href="https://intilery.com/docs/customers/computed-traits" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://intilery.com/docs/customers/computed-traits" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.8553c702.css">
<link rel="preload" href="/assets/js/runtime~main.4d15470a.js" as="script">
<link rel="preload" href="/assets/js/main.012ac440.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP shadow--md">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="intilery" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="intilery" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">intilery</b></a><a class="navbar__item navbar__link" href="/docs/guides/contents">Guides</a><a class="navbar__item navbar__link" href="/docs/apis/api">APIs</a><a class="navbar__item navbar__link" href="/docs/tag/tag1">JavaScript Tag</a><a class="navbar__item navbar__link" href="/docs/sdk/ios">Mobile SDKs</a><a class="navbar__item navbar__link" href="/docs/schema/contents">Schema</a><a class="navbar__item navbar__link" href="/docs/roadmap/roadmap">Roadmap</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="intilery" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="intilery" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">intilery</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/guides/contents">Guides</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/apis/api">APIs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tag/tag1">JavaScript Tag</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/sdk/ios">Mobile SDKs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema/contents">Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/roadmap/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Customers Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customers/overview">Customers</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/customers/computed-traits">Computed Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customers/sql-traits">SQL Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customers/audiences">Audiences</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Computed Traits</h1></header><p>Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the <code>total_num_orders</code> a customer has completed, the <code>lifetime_revenue</code> of a customer, the <code>most_frequent_category</code> to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the <a href="/docs/schema/page">page</a> and <a href="/docs/schema/track">track</a> calls.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="processing"></a>Processing<a class="hash-link" href="#processing" title="Direct link to heading">#</a></h2><p>Computed traits are updated every 30 minutes. Therefore if you are using the value of a computed trait in a journey, in a split for example, add a wait step of 30 minutes proceeding the use of the computed trait to ensure the value is up to date</p><p><strong><em>Note:</em></strong> It is not currently possible to trigger a journey from the change of a value of a computed trait</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="types-of-computed-traits"></a>Types of Computed Traits<a class="hash-link" href="#types-of-computed-traits" title="Direct link to heading">#</a></h2><p>Customers currently supports the following types of computed traits:</p><ul><li>Types of Computed Traits<ul><li><a href="#event-counter">Event Counter</a></li><li><a href="#aggregation">Aggregation</a></li><li><a href="#most-frequent">Most Frequent</a></li><li><a href="#first">First</a></li><li><a href="#last">Last</a></li><li><a href="#unique-list">Unique List</a></li><li><a href="#unique-list-count">Unique List Count</a></li></ul></li><li><a href="#conditions">Conditions</a></li><li><a href="#accessing-your-computed-traits-using-the-profiles-api">Accessing your Computed Traits using the Profiles API</a></li></ul><p><img alt="Computed Traits" src="/assets/images/computed-traits-9f6b26cab227d3eec009a2bec4febb13.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="event-counter"></a>Event Counter<a class="hash-link" href="#event-counter" title="Direct link to heading">#</a></h3><p>An Event Counter trait stores a count of an <strong>event</strong> over a period of time. For example, you can create a trait called <code>number_logins_90_days</code> based on a <code>User Logged In</code> event. You can also use event properties to only specific types of events.</p><p>Customer-level examples:</p><ul><li>Orders Completed Last 30 Days</li><li>Pricing Page Views Last 30 Days</li></ul><p><img alt="Event Counter" src="/assets/images/event-counter-9589063c928eef40475855f56cc10505.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aggregation"></a>Aggregation<a class="hash-link" href="#aggregation" title="Direct link to heading">#</a></h3><p>An aggregation computes a <strong>sum, average, minimum, or maximum</strong> of a numeric <strong>event property</strong>. A good example is a <code>sum_games_revenue_90_days</code> if you’re sending an <code>Order Completed</code> event with a <code>revenue</code> property. In the example we’re refining the revenue even further based on another event property: <code>category = &#x27;games&#x27;</code>. Note that you can only compute an aggregation trait for event properties that have a numeric value.</p><p>Customer-level examples:</p><ul><li>Order Revenue Last 14 Days</li><li>Max Ride Distance Last 60 Days</li></ul><p><img alt="Aggregation" src="/assets/images/aggregation-c4badff2468c42e63185fa9b55bd1857.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="most-frequent"></a>Most Frequent<a class="hash-link" href="#most-frequent" title="Direct link to heading">#</a></h3><p>A most frequent customer-level computed trait will return the <strong>most common value</strong> for an <strong>event property</strong>. This is helpful to create traits like <code>preferred_product_viewed</code> or <code>most_commonly_viewed_category</code> that tell you what a customer&#x27;s preferred product, or content category might be. Note that the most frequent computed trait requires the event property to have been tracked at least twice. In the case of a tie, we return the first alphabetical value.</p><p>Customer-level examples:</p><ul><li>Favorite Blog Post</li><li>Top Purchase Category</li></ul><p><img alt="Most Frequent" src="/assets/images/most-frequent-3d31d2482fcd47b8707f4b74dab92318.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="first"></a>First<a class="hash-link" href="#first" title="Direct link to heading">#</a></h3><p>The first customer-level trait returns the first event property value we have seen. This is common for creating traits like <code>first_page_visited</code> based on the page name.</p><p>Customer-level examples:</p><ul><li>First seen timestamp</li><li>First utm parameter</li></ul><p><img alt="First" src="/assets/images/first-c2b12f0eb2738b1c5dc6c1d98d5164a8.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="last"></a>Last<a class="hash-link" href="#last" title="Direct link to heading">#</a></h3><p>The last trait returns the last event property value we have seen. This is common for creating traits like <code>last_utm_campaign</code> to help you calculate last-touch attribution for paid advertising.</p><p>Customer-level examples:</p><ul><li>Last seen at</li><li>Last utm parameter</li></ul><p><img alt="Last" src="/assets/images/last-8f6f76504f8123baf188ccc7ced8ef7a.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unique-list"></a>Unique List<a class="hash-link" href="#unique-list" title="Direct link to heading">#</a></h3><p>Unique list computed traits will output a <strong>list of unique values</strong> for an <strong>event property</strong>. This is helpful to understand the different types of products or content that a customer has interacted with or purchased. You can create a triat like <code>unique_product_categories_viewed</code> and send marketing communications based on the categories viewed.</p><p>Example use cases:</p><ul><li>Unique products purchased</li><li>Unique categories</li><li>Unique games played</li></ul><p><img alt="Unique List" src="/assets/images/unique-list-276621b786a691bbf9a693af3ad35279.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unique-list-count"></a>Unique List Count<a class="hash-link" href="#unique-list-count" title="Direct link to heading">#</a></h3><p>Unique list count computed traits will output a <strong>count of the unique list of values</strong> for an <strong>event property</strong>. You can create a traits like <code>unique_product_categories_viewed_count</code> to understand the variety of products that a customer is viewing.</p><p>Customer-level examples:</p><ul><li>Unique products viewed count</li><li>Unique categories count</li></ul><p><img alt="Unique List Count" src="/assets/images/unique-list-count-3b5d173ef8f67c37101f7ac1f39507c8.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="conditions"></a>Conditions<a class="hash-link" href="#conditions" title="Direct link to heading">#</a></h2><p>All computed trait types support a common “Add Conditions” section. Conditions defined here restrict the messages considered when calculating the final value of the computed trait by looking at a property of the events. For example, you could limits events to only those where “price” is greater than 30.00 or where “page.url” contains “pricing”.</p><p>The following operators are available.</p><ul><li>equals</li><li>not equals -</li><li>less than</li><li>greater than</li><li>less than or equal</li><li>greater than or equal</li><li>contains</li><li>does not contain</li><li>starts with</li><li>ends with</li><li>exists</li><li>not exists</li><li>before date</li><li>after date</li><li>within last (x days)</li><li>with next (x days)</li><li>before last (x days)</li><li>after next (x days)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="accessing-your-computed-traits-using-the-profiles-api"></a>Accessing your Computed Traits using the Profiles API<a class="hash-link" href="#accessing-your-computed-traits-using-the-profiles-api" title="Direct link to heading">#</a></h2><p>You can access your computed traits using the Profile API by querying the <code>/traits</code> endpoint. All types of traits are returned for the customer</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://tracking.intilery.com/track/intilery/marketing/MARKETING/v1/profiles/email:xxx.xxx@intilery.com/traits</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>returns:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;lastName&quot;: &quot;Bloggs&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;website&quot;: &quot;www.intilery.com&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;externalId&quot;: &quot;joe.bloggs@intilery.com&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;organisation&quot;: &quot;Intilery&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;industry&quot;: &quot;Other&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;firstName&quot;: &quot;Joe&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;phone&quot;: &quot;+44111222333444&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;computed&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;number_logins_90_days&quot;: 9,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;sum_games_revenue_90_days&quot;:99.99</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;email&quot;: &quot;joe.bloggs@intilery.com&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can read the <a href="/docs/apis/profile">full Profile API docs</a> to learn more.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/customers/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Customers</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/customers/sql-traits"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SQL Traits »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#processing" class="table-of-contents__link">Processing</a></li><li><a href="#types-of-computed-traits" class="table-of-contents__link">Types of Computed Traits</a><ul><li><a href="#event-counter" class="table-of-contents__link">Event Counter</a></li><li><a href="#aggregation" class="table-of-contents__link">Aggregation</a></li><li><a href="#most-frequent" class="table-of-contents__link">Most Frequent</a></li><li><a href="#first" class="table-of-contents__link">First</a></li><li><a href="#last" class="table-of-contents__link">Last</a></li><li><a href="#unique-list" class="table-of-contents__link">Unique List</a></li><li><a href="#unique-list-count" class="table-of-contents__link">Unique List Count</a></li></ul></li><li><a href="#conditions" class="table-of-contents__link">Conditions</a></li><li><a href="#accessing-your-computed-traits-using-the-profiles-api" class="table-of-contents__link">Accessing your Computed Traits using the Profiles API</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a href="http://support.intilery.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/apis/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tag/tag1">JavaScript Tag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sdk/ios">Mobile SDKs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/schema/contents">Schema</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/intilery" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/intilery-com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.facebook.com/intilery/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.instagram.com/intilery/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.intilery.com/category/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Marketing Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Intilery.com Ltd.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4d15470a.js"></script>
<script src="/assets/js/main.012ac440.js"></script>
</body>
</html>