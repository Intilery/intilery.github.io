"use strict";(self.webpackChunkintilery=self.webpackChunkintilery||[]).push([[6827],{5570:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"apis/commands","title":"API Commands","description":"The track action on the API Event Endpoint will accept a number of event values that act as commands to trigger","source":"@site/docs/apis/commands.md","sourceDirName":"apis","slug":"/apis/commands","permalink":"/docs/apis/commands","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"commands","title":"API Commands","sidebar_label":"Commands"},"sidebar":"apis","previous":{"title":"API Guide","permalink":"/docs/apis/api"},"next":{"title":"Events","permalink":"/docs/apis/events"}}');var r=n(4848),i=n(8453);const d={id:"commands",title:"API Commands",sidebar_label:"Commands"},l=void 0,c={},o=[{value:"Commands",id:"commands",level:2},{value:"Event Data for send_ commands",id:"event-data-for-send_-commands",level:2},{value:"Example",id:"example",level:3},{value:"Event Data for start_journey command",id:"event-data-for-start_journey-command",level:2},{value:"Example",id:"example-1",level:3}];function a(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"track action"})," on the API Event Endpoint will accept a number of ",(0,r.jsx)(t.strong,{children:"event"})," values that act as ",(0,r.jsx)(t.strong,{children:"commands"})," to trigger\nthe sending of a specific asset. In these cases there is no need to pass a separate properties section, as every value under\nthe root of the object forms the start of data for use as a merge tag in the campaign, though the properties of the\ncustomer are available as usual in the merge tags."]}),"\n",(0,r.jsxs)(t.p,{children:["Each event must provide the ",(0,r.jsx)(t.code,{children:"assetId"})," property to identify the asset code of the asset to be sent."]}),"\n",(0,r.jsxs)(t.p,{children:["When the asset is sent, the current state of the ",(0,r.jsx)(t.strong,{children:"customer"})," is added by the Intilery CDP as a root merge tag,\nso does not need to be passed in on the track event."]}),"\n",(0,r.jsxs)(t.p,{children:["Note that you can only send to a ",(0,r.jsx)(t.strong,{children:"customer"})," who has been ",(0,r.jsx)(t.a,{href:"./api#identify-action",children:"identified"})," via the ",(0,r.jsx)(t.a,{href:"/docs/apis/api",children:"HTTP API"}),"\nor ",(0,r.jsx)(t.a,{href:"/docs/tag/reference#identify",children:"identified"})," via the ",(0,r.jsx)(t.a,{href:"/docs/tag/tag1",children:"Analytics.js tag"})]}),"\n",(0,r.jsx)(t.h2,{id:"commands",children:"Commands"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"event"})}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"action"})})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"send_email"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"send the specified email"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"send_sms"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"send the specified sms"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"send_print"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"send the specified letter"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"send_push"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"send the specified push to all customers devices"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"start_journey"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"start a journey"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"event-data-for-send_-commands",children:"Event Data for send_ commands"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"field"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsx)(t.th,{children:"description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"userId"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsx)(t.td,{children:"Unique identifier for the user in your database"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"event"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsx)(t.td,{children:"One of the commands listed above."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"assetId"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsx)(t.td,{children:"The code of the Campaign (Asset)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"timestamp"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"optional"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.a,{href:"http://en.wikipedia.org/wiki/ISO_8601",children:"ISO-8601 UTC Timestamp"})," (e.g. 2019-11-18T13:30:11.444Z) for then the event happened"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"<anything else>"})}),(0,r.jsx)(t.td,{children:"optional"}),(0,r.jsx)(t.td,{children:"Any valid JSON that is then available for use in the asset using merge tags"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",metastring:"request",children:"POST https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/track\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n\t"userId": "ABC/123",  \n\t"event": "SEND_SMS",  \n\t"assetId": "202007-B-AbandonedBooking",  \n\t"timestamp": "2019-11-18T13:30:12.984Z",  \n\t"bookingId" : "1234" \n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"event-data-for-start_journey-command",children:"Event Data for start_journey command"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"field"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsx)(t.th,{children:"description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"userId"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsx)(t.td,{children:"Unique identifier for the user in your database"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"event"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"start_journey"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"properties.journeyIdToTrigger"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"required"})}),(0,r.jsxs)(t.td,{children:["The ID of the Journey to start. You can get this from the URL when you view a journey, e.g. if the URL is: ",(0,r.jsx)(t.code,{children:"/journeys/view/6046429d73096e3b2dca973d/1"}),", then the journey ID is ",(0,r.jsx)(t.code,{children:"6046429d73096e3b2dca973d"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"properties.stepIdToTrigger"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"optional"})}),(0,r.jsx)(t.td,{children:"The ID of the step to insert the customer at. Copy this from your journey steps by clicking the barcode icon at top right of any step"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"timestamp"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"optional"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.a,{href:"http://en.wikipedia.org/wiki/ISO_8601",children:"ISO-8601 UTC Timestamp"})," (e.g. 2019-11-18T13:30:11.444Z) for then the event happened"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"<anything else>"})}),(0,r.jsx)(t.td,{children:"optional"}),(0,r.jsx)(t.td,{children:"Any valid JSON that is then available for use in the journey or for forwarding on to assets when sending a campaign"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-http",metastring:"request",children:"POST https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/track\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n    "userId": "ABC/123",  \n    "event": "start_journey",\n    "properties": {\n      "journeyIdToTrigger": "6046429d73096e3b2dca973d",\n\t  "stepIdToTrigger": "01c318b8-1f16-40b3-9808-709c5c1b44f6"\n    }\n}\n'})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"Note:"})}),' When looking at events or customers in the Intilery platform, you may see references to "customerId", this is the internal unique ID for the customer that Intilery assigns. This ID is for Intilery use only.']})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>l});var s=n(6540);const r={},i=s.createContext(r);function d(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);