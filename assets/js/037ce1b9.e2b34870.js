"use strict";(self.webpackChunkintilery=self.webpackChunkintilery||[]).push([[1735],{7942:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"tag/gtm-datalayer","title":"Google Tag Manager Data Layer","description":"Google Tag Manager (GTM) is a tag management system that allows you to quickly and easily update tags and code snippets on your website or mobile apps. Once you add the Tag Manager snippet to your website or mobile app, you can configure tags using a web-based user interface without having to alter and deploy additional code. This reduces errors and frees you from having to involve a developer whenever you need to make changes. The Google Tag Manager Destination is open-source. You can browse the code on GitHub.","source":"@site/docs/tag/gtm-dataLayer.md","sourceDirName":"tag","slug":"/tag/gtm-datalayer","permalink":"/docs/tag/gtm-datalayer","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"gtm-datalayer","title":"Google Tag Manager Data Layer","sidebar_label":"Google Tag Manager Data Layer"},"sidebar":"tag","previous":{"title":"Google Tag Manager","permalink":"/docs/tag/gtm"},"next":{"title":"GTM Advanced Ecommerce","permalink":"/docs/tag/gtm-ecommerce"}}');var s=n(4848),r=n(8453);const i={id:"gtm-datalayer",title:"Google Tag Manager Data Layer",sidebar_label:"Google Tag Manager Data Layer"},o=void 0,l={},c=[{value:"Identify",id:"identify",level:2},{value:"Querystring API",id:"querystring-api",level:3},{value:"Track",id:"track",level:2}];function d(e){const a={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.a,{href:"https://support.google.com/tagmanager",children:"Google Tag Manager"})," (GTM) is a tag management system that allows you to quickly and easily update tags and code snippets on your website or mobile apps. Once you add the Tag Manager snippet to your website or mobile app, you can configure tags using a web-based user interface without having to alter and deploy additional code. This reduces errors and frees you from having to involve a developer whenever you need to make changes. The Google Tag Manager Destination is open-source. You can browse the code ",(0,s.jsx)(a.a,{href:"https://github.com/segment-integrations/analytics.js-integration-google-tag-manager",children:"on GitHub"}),"."]}),"\n",(0,s.jsx)(a.p,{children:"Google Tag Manager functions best when deployed alongside a data layer, if enabled in your Intilery tag, Intilery will publish events to the dataLayer."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.a,{href:"https://support.google.com/tagmanager/answer/6164391",children:"Data Layer"})}),"\n",(0,s.jsx)(a.p,{children:"To enable publishing of events to the GTM dataLayer, go to the tag page in Intilery, enable GTM dataLayer integration and enter the container-ID of your GTM container."}),"\n",(0,s.jsx)(a.h2,{id:"identify",children:"Identify"}),"\n",(0,s.jsxs)(a.p,{children:["If you\u2019re not familiar with the Intilery Schema, take a look to understand what the ",(0,s.jsx)(a.a,{href:"/docs/schema/identify",children:"Identify method"})," does. An example call would look like:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-javascript",children:"analytics.identify({\n  nickname: 'Joe',\n  favoriteCompiler: 'A-0',\n  industry: 'Computer Science'\n});\n"})}),"\n",(0,s.jsxs)(a.p,{children:["When you make an Identify call in with GTM enabled through Intilery, we will push the event data to the GTM ",(0,s.jsx)(a.code,{children:"dataLayer"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["For example, if you make this ",(0,s.jsx)(a.code,{children:"track"})," call:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-javascript",children:'analytics.identify(\'12091906-01011992\', {\n  firstName: \'Joe\',\n  lastName: \'Bloggs\',\n  email: \'joe.bloggs@example.com\',\n  "marketingPreferences": { \n      "channels": [ \n        { "channel": "email", "subscribed": true },\n        { "channel": "sms", "subscribed": true },\n        { "channel": "whatsapp", "subscribed": false },\n        { "channel": "facebook", "subscribed": false },\n        { "channel": "push", "subscribed": false }\n      ] \n    }\n});\n'})}),"\n",(0,s.jsxs)(a.p,{children:["We will pass it to the ",(0,s.jsx)(a.code,{children:"dataLayer"})," as an object like this:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-json",children:'{\n  "event": "identify",\n  "userId": "12091906-01011992",\n  "traits": {\n  \t"firstName": "Joe",\n  \t"lastName": "Bloggs",\n  \t"email": "joe.bloggs@example.com",\n  \t"marketingPreferences": { \n     \t "channels": [ \n       \t{ "channel": "email", "subscribed": true },\n        { "channel": "sms", "subscribed": true },\n        { "channel": "whatsapp", "subscribed": false },\n        { "channel": "facebook", "subscribed": false },\n        { "channel": "push", "subscribed": false }\n      ] \n    }\n\t}\n}\n'})}),"\n",(0,s.jsx)(a.h3,{id:"querystring-api",children:"Querystring API"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.em,{children:(0,s.jsx)(a.strong,{children:"Note:"})})," if you use any of the ",(0,s.jsx)(a.a,{href:"/docs/tag/reference#querystring-api",children:"querystring API"})," methods the identify/track data will be sent to the dataLayer accordingly, e.g."]}),"\n",(0,s.jsxs)(a.p,{children:["visiting ",(0,s.jsx)(a.a,{href:"https://www.yoursite.com/?ajs_uid=1234-5678",children:"https://www.yoursite.com/?ajs_uid=1234-5678"})]}),"\n",(0,s.jsx)(a.p,{children:"will result an identify event being sent to the dataLayer, e.g."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-json5",children:'{\n  "event": \'identify\',\n  "userId": \'12091906-01011992\',\n  "traits": {\n    // <if traits previously set, these are included>\n  }\n}\n'})}),"\n",(0,s.jsx)(a.h2,{id:"track",children:"Track"}),"\n",(0,s.jsxs)(a.p,{children:["If you\u2019re not familiar with the Intilery Schema, take a look to understand what the ",(0,s.jsx)(a.a,{href:"/docs/schema/track",children:"Track method"})," does. An example call would look like:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-javascript",children:"analytics.track('Article Completed', {\n  title: 'How to Create a Tracking Plan',\n  course: 'Intro to Analytics',\n});\n"})}),"\n",(0,s.jsxs)(a.p,{children:["When you make a Track call in with GTM enabled through Intilery, we will push the event data to the GTM ",(0,s.jsx)(a.code,{children:"dataLayer"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["For example, if you make this ",(0,s.jsx)(a.code,{children:"track"})," call:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-javascript",children:"analytics.track('Played Video', {\n  title: 'How to Dance the Tango',\n  location: 'Tango FAQ Page'\n})\n"})}),"\n",(0,s.jsxs)(a.p,{children:["We will pass it to the ",(0,s.jsx)(a.code,{children:"dataLayer"})," as an object like this:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-json",children:'{\n  "event": "Played Video",\n  "title": "How to Dance the Tango",\n  "location": "Tango FAQ Page"\n}\n'})})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>o});var t=n(6540);const s={},r=t.createContext(s);function i(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);